<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>minemap: includes/read_nbt.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>includes/read_nbt.h File Reference</h1><code>#include &lt;zlib.h&gt;</code><br>
<code>#include &quot;<a class="el" href="nbt_8h-source.html">nbt.h</a>&quot;</code><br>

<p>
<a href="read__nbt_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="552e87468d1a7875ed2cc2306ad15cdf"></a><!-- doxytag: member="read_nbt.h::NBT_READ_BUFFER_SIZE" ref="552e87468d1a7875ed2cc2306ad15cdf" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="read__nbt_8h.html#552e87468d1a7875ed2cc2306ad15cdf">NBT_READ_BUFFER_SIZE</a>&nbsp;&nbsp;&nbsp;16</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">How big the generic, reusable buffer should be. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="9c74adc8d1cbf9db3eef8c1413b77dc9"></a><!-- doxytag: member="read_nbt.h::NBT_READ_UTF8_BUFFER_SIZE" ref="9c74adc8d1cbf9db3eef8c1413b77dc9" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="read__nbt_8h.html#9c74adc8d1cbf9db3eef8c1413b77dc9">NBT_READ_UTF8_BUFFER_SIZE</a>&nbsp;&nbsp;&nbsp;32768</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Maximum size of a TAG_String. <br></td></tr>
<tr><td colspan="2"><div class="groupHeader">UTF-8 Endpoints</div></td></tr>
<tr><td colspan="2"><div class="groupText">Constants used to test the validity of utf-8 data <br><br></div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d59a36ffaf7a7019ac01994704aac4d5"></a><!-- doxytag: member="read_nbt.h::UTF8_SINGLE_MAX" ref="d59a36ffaf7a7019ac01994704aac4d5" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>UTF8_SINGLE_MAX</b>&nbsp;&nbsp;&nbsp;0x7F</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="7f63cc5160a918618f0233c60d64d228"></a><!-- doxytag: member="read_nbt.h::UTF8_CONT_MIN" ref="7f63cc5160a918618f0233c60d64d228" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>UTF8_CONT_MIN</b>&nbsp;&nbsp;&nbsp;0x80</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="e156c23d6c3852ed2c5724a2c1d9b477"></a><!-- doxytag: member="read_nbt.h::UTF8_CONT_MAX" ref="e156c23d6c3852ed2c5724a2c1d9b477" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>UTF8_CONT_MAX</b>&nbsp;&nbsp;&nbsp;0xBF</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="98d9dd0db576520d59484b85e015921a"></a><!-- doxytag: member="read_nbt.h::UTF8_DOUBLE_MIN" ref="98d9dd0db576520d59484b85e015921a" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>UTF8_DOUBLE_MIN</b>&nbsp;&nbsp;&nbsp;0xC2</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="969fab11a17060328f7260751254dfc3"></a><!-- doxytag: member="read_nbt.h::UTF8_DOUBLE_MAX" ref="969fab11a17060328f7260751254dfc3" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>UTF8_DOUBLE_MAX</b>&nbsp;&nbsp;&nbsp;0xDF</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="596aa63700ba3605a016559837e9f160"></a><!-- doxytag: member="read_nbt.h::UTF8_TRIPLE_MIN" ref="596aa63700ba3605a016559837e9f160" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>UTF8_TRIPLE_MIN</b>&nbsp;&nbsp;&nbsp;0xE0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5061fc36aa7428ee3a0ea1646d15b465"></a><!-- doxytag: member="read_nbt.h::UTF8_TRIPLE_MAX" ref="5061fc36aa7428ee3a0ea1646d15b465" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>UTF8_TRIPLE_MAX</b>&nbsp;&nbsp;&nbsp;0xEF</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a3f5bfa37a4be1859b2f9d934c614356"></a><!-- doxytag: member="read_nbt.h::UTF8_QUAD_MIN" ref="a3f5bfa37a4be1859b2f9d934c614356" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>UTF8_QUAD_MIN</b>&nbsp;&nbsp;&nbsp;0xF0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="10a1a61733bcba77158ea9906f49055b"></a><!-- doxytag: member="read_nbt.h::UTF8_QUAD_MAX" ref="10a1a61733bcba77158ea9906f49055b" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>UTF8_QUAD_MAX</b>&nbsp;&nbsp;&nbsp;0xF4</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="b6964145b0ec9774683a309af5c842f7"></a><!-- doxytag: member="read_nbt.h::UTF8_MASK_DOUBLE" ref="b6964145b0ec9774683a309af5c842f7" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>UTF8_MASK_DOUBLE</b>&nbsp;&nbsp;&nbsp;0x1F</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="2074d46b7983a19b8f639b675216c8c8"></a><!-- doxytag: member="read_nbt.h::UTF8_MASK_TRIPLE" ref="2074d46b7983a19b8f639b675216c8c8" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>UTF8_MASK_TRIPLE</b>&nbsp;&nbsp;&nbsp;0x0F</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="6f922f4fd648787723c1af441530dcfd"></a><!-- doxytag: member="read_nbt.h::UTF8_MASK_QUAD" ref="6f922f4fd648787723c1af441530dcfd" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>UTF8_MASK_QUAD</b>&nbsp;&nbsp;&nbsp;0x07</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="6b631a99ab3481e098dcc7228186b20c"></a><!-- doxytag: member="read_nbt.h::UTF8_MASK_PAYLOAD" ref="6b631a99ab3481e098dcc7228186b20c" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>UTF8_MASK_PAYLOAD</b>&nbsp;&nbsp;&nbsp;0x3F</td></tr>

<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="read__nbt_8h.html#220b248d83784b7ec776f9080fea18e3">nbt_read_errors</a> { <br>
&nbsp;&nbsp;<a class="el" href="read__nbt_8h.html#220b248d83784b7ec776f9080fea18e3ac99ef583c89662450830bd57206f7d9">NBT_READ_OK</a>, 
<a class="el" href="read__nbt_8h.html#220b248d83784b7ec776f9080fea18e3d89bf1ef8012666ae8c8058647c160a4">NBT_READ_PREMATURE_EOF</a>, 
<a class="el" href="read__nbt_8h.html#220b248d83784b7ec776f9080fea18e3bb024b0f562f5b200530b663faca49b0">NBT_READ_GZREAD_ERROR</a>, 
<a class="el" href="read__nbt_8h.html#220b248d83784b7ec776f9080fea18e35bfe852e86771a8c9d1b15d27ec46159">NBT_READ_OUT_OF_MEM</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="read__nbt_8h.html#220b248d83784b7ec776f9080fea18e30b9860dbb0e49b9386df792b7e5ecccc">NBT_READ_MALFORMED_INPUT</a>, 
<a class="el" href="read__nbt_8h.html#220b248d83784b7ec776f9080fea18e37eae134e048bafc1e0f9293263d44c9a">NBT_READ_INVALID_UTF8</a>
<br>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Error codes returned by <a class="el" href="read__nbt_8h.html#5d411745629a5bee438464fe67e6b4fa" title="Read an NBT file and place its information into an nbt_tag.">nbt_read()</a>.  <a href="read__nbt_8h.html#220b248d83784b7ec776f9080fea18e3">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structnbt__tag.html">nbt_tag</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="read__nbt_8h.html#5d411745629a5bee438464fe67e6b4fa">nbt_read</a> (gzFile file, int force_tag_type)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read an NBT file and place its information into an <a class="el" href="structnbt__tag.html" title="Contains a single NBT tag entry.">nbt_tag</a>.  <a href="#5d411745629a5bee438464fe67e6b4fa"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="read__nbt_8h.html#47064c4c60c646e284f33520d61f6bbf">nbt_read_gzread</a> (gzFile file, void *buffer, int length)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wraps gzread in zlib.h and does error checking.  <a href="#47064c4c60c646e284f33520d61f6bbf"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="read__nbt_8h.html#e17508a7a608530430c468da6a07200e">nbt_read_gzread_utf8</a> (gzFile file, wchar_t *wchar_buffer, int length)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reads a utf8 string from a gzFile.  <a href="#e17508a7a608530430c468da6a07200e"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Routines to read NBT files into memory <hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="220b248d83784b7ec776f9080fea18e3"></a><!-- doxytag: member="read_nbt.h::nbt_read_errors" ref="220b248d83784b7ec776f9080fea18e3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="read__nbt_8h.html#220b248d83784b7ec776f9080fea18e3">nbt_read_errors</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Error codes returned by <a class="el" href="read__nbt_8h.html#5d411745629a5bee438464fe67e6b4fa" title="Read an NBT file and place its information into an nbt_tag.">nbt_read()</a>. 
<p>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="220b248d83784b7ec776f9080fea18e3ac99ef583c89662450830bd57206f7d9"></a><!-- doxytag: member="NBT_READ_OK" ref="220b248d83784b7ec776f9080fea18e3ac99ef583c89662450830bd57206f7d9" args="" -->NBT_READ_OK</em>&nbsp;</td><td>
Everything is OK. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="220b248d83784b7ec776f9080fea18e3d89bf1ef8012666ae8c8058647c160a4"></a><!-- doxytag: member="NBT_READ_PREMATURE_EOF" ref="220b248d83784b7ec776f9080fea18e3d89bf1ef8012666ae8c8058647c160a4" args="" -->NBT_READ_PREMATURE_EOF</em>&nbsp;</td><td>
The file unexpectedly ran out of input data. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="220b248d83784b7ec776f9080fea18e3bb024b0f562f5b200530b663faca49b0"></a><!-- doxytag: member="NBT_READ_GZREAD_ERROR" ref="220b248d83784b7ec776f9080fea18e3bb024b0f562f5b200530b663faca49b0" args="" -->NBT_READ_GZREAD_ERROR</em>&nbsp;</td><td>
gzread threw an error, use gzerror in zlib.h to determine what is wrong </td></tr>
<tr><td valign="top"><em><a class="anchor" name="220b248d83784b7ec776f9080fea18e35bfe852e86771a8c9d1b15d27ec46159"></a><!-- doxytag: member="NBT_READ_OUT_OF_MEM" ref="220b248d83784b7ec776f9080fea18e35bfe852e86771a8c9d1b15d27ec46159" args="" -->NBT_READ_OUT_OF_MEM</em>&nbsp;</td><td>
<a class="el" href="read__nbt_8h.html#5d411745629a5bee438464fe67e6b4fa" title="Read an NBT file and place its information into an nbt_tag.">nbt_read()</a> ran out of memory to allocate </td></tr>
<tr><td valign="top"><em><a class="anchor" name="220b248d83784b7ec776f9080fea18e30b9860dbb0e49b9386df792b7e5ecccc"></a><!-- doxytag: member="NBT_READ_MALFORMED_INPUT" ref="220b248d83784b7ec776f9080fea18e30b9860dbb0e49b9386df792b7e5ecccc" args="" -->NBT_READ_MALFORMED_INPUT</em>&nbsp;</td><td>
An unexpected value was read out of the input file. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="220b248d83784b7ec776f9080fea18e37eae134e048bafc1e0f9293263d44c9a"></a><!-- doxytag: member="NBT_READ_INVALID_UTF8" ref="220b248d83784b7ec776f9080fea18e37eae134e048bafc1e0f9293263d44c9a" args="" -->NBT_READ_INVALID_UTF8</em>&nbsp;</td><td>
An invalid utf-8 byte was detected. </td></tr>
</table>
</dl>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="5d411745629a5bee438464fe67e6b4fa"></a><!-- doxytag: member="read_nbt.h::nbt_read" ref="5d411745629a5bee438464fe67e6b4fa" args="(gzFile file, int force_tag_type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structnbt__tag.html">nbt_tag</a>* nbt_read           </td>
          <td>(</td>
          <td class="paramtype">gzFile&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>force_tag_type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read an NBT file and place its information into an <a class="el" href="structnbt__tag.html" title="Contains a single NBT tag entry.">nbt_tag</a>. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>file</em>&nbsp;</td><td>A gzFile to read from </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>force_tag_type</em>&nbsp;</td><td>Set to the child tag type if you are reading tags for an NBT_List, and pass 0 in every other case </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>An <a class="el" href="structnbt__tag.html" title="Contains a single NBT tag entry.">nbt_tag</a> holding the next tag in the file. Returns NULL on error</dd></dl>
If a TAG_Compound is found, this function will recurse and pick up all the other tags that it contains. 
</div>
</div><p>
<a class="anchor" name="47064c4c60c646e284f33520d61f6bbf"></a><!-- doxytag: member="read_nbt.h::nbt_read_gzread" ref="47064c4c60c646e284f33520d61f6bbf" args="(gzFile file, void *buffer, int length)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nbt_read_gzread           </td>
          <td>(</td>
          <td class="paramtype">gzFile&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>length</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Wraps gzread in zlib.h and does error checking. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>file</em>&nbsp;</td><td>A gzFile to read from </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>buffer</em>&nbsp;</td><td>The buffer to write to </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>length</em>&nbsp;</td><td>The number of bytes to read from file and write to buffer</td></tr>
  </table>
</dl>
This function will continue to attempt to read from file until the total number of bytes are read or EOF hits. Returns 0 on success, -1 if there's an error or the EOF occured prematurely. 
</div>
</div><p>
<a class="anchor" name="e17508a7a608530430c468da6a07200e"></a><!-- doxytag: member="read_nbt.h::nbt_read_gzread_utf8" ref="e17508a7a608530430c468da6a07200e" args="(gzFile file, wchar_t *wchar_buffer, int length)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nbt_read_gzread_utf8           </td>
          <td>(</td>
          <td class="paramtype">gzFile&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">wchar_t *&nbsp;</td>
          <td class="paramname"> <em>wchar_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>length</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Reads a utf8 string from a gzFile. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>file</em>&nbsp;</td><td>A gzFile to read from </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>wchar_buffer</em>&nbsp;</td><td>A buffer to write to that's big enough to fit length characters </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>length</em>&nbsp;</td><td>The number of utf8 characters to read </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success, nonzero on error. Error code stored in nbt_read_error. </dd></dl>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Sep 8 12:28:22 2010 for minemap by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
